package com.taoping.tool;

import java.util.ArrayList;
import java.util.HashMap;

//频率和音名对应库的类，并提供方法查询某一频率返回音名
public class NoteFrequencyTool {
    private static final ArrayList<String> noteList = new ArrayList<>();
    private static final ArrayList<NoteFrequencyRange> noteLibRangeList = new ArrayList<>();
    private static final HashMap<String, Float> noteFrequencyMap = new HashMap<>();

    //初始化音名list
    static{
        noteList.add("C00");
        noteList.add("CS0");
        noteList.add("D00");
        noteList.add("DS0");
        noteList.add("E00");
        noteList.add("F00");
        noteList.add("FS0");
        noteList.add("G00");
        noteList.add("GS0");
        noteList.add("A00");
        noteList.add("AS0");
        noteList.add("B00");
        noteList.add("C01");
        noteList.add("CS1");
        noteList.add("D01");
        noteList.add("DS1");
        noteList.add("E01");
        noteList.add("F01");
        noteList.add("FS1");
        noteList.add("G01");
        noteList.add("GS1");
        noteList.add("A01");
        noteList.add("AS1");
        noteList.add("B01");
        noteList.add("C02");
        noteList.add("CS2");
        noteList.add("D02");
        noteList.add("DS2");
        noteList.add("E02");
        noteList.add("F02");
        noteList.add("FS2");
        noteList.add("G02");
        noteList.add("GS2");
        noteList.add("A02");
        noteList.add("AS2");
        noteList.add("B02");
        noteList.add("C03");
        noteList.add("CS3");
        noteList.add("D03");
        noteList.add("DS3");
        noteList.add("E03");
        noteList.add("F03");
        noteList.add("FS3");
        noteList.add("G03");
        noteList.add("GS3");
        noteList.add("A03");
        noteList.add("AS3");
        noteList.add("B03");
        noteList.add("C04");
        noteList.add("CS4");
        noteList.add("D04");
        noteList.add("DS4");
        noteList.add("E04");
        noteList.add("F04");
        noteList.add("FS4");
        noteList.add("G04");
        noteList.add("GS4");
        noteList.add("A04");
        noteList.add("AS4");
        noteList.add("B04");
        noteList.add("C05");
        noteList.add("CS5");
        noteList.add("D05");
        noteList.add("DS5");
        noteList.add("E05");
        noteList.add("F05");
        noteList.add("FS5");
        noteList.add("G05");
        noteList.add("GS5");
        noteList.add("A05");
        noteList.add("AS5");
        noteList.add("B05");
        noteList.add("C06");
        noteList.add("CS6");
        noteList.add("D06");
        noteList.add("DS6");
        noteList.add("E06");
        noteList.add("F06");
        noteList.add("FS6");
        noteList.add("G06");
        noteList.add("GS6");
        noteList.add("A06");
        noteList.add("AS6");
        noteList.add("B06");
        noteList.add("C07");
        noteList.add("CS7");
        noteList.add("D07");
        noteList.add("DS7");
        noteList.add("E07");
        noteList.add("F07");
        noteList.add("FS7");
        noteList.add("G07");
        noteList.add("GS7");
        noteList.add("A07");
        noteList.add("AS7");
        noteList.add("B07");
        noteList.add("C08");
        noteList.add("CS8");
        noteList.add("D08");
        noteList.add("DS8");
        noteList.add("E08");
        noteList.add("F08");
        noteList.add("FS8");
        noteList.add("G08");
        noteList.add("GS8");
        noteList.add("A08");
        noteList.add("AS8");
        noteList.add("B08");
        noteList.add("C09");
        noteList.add("CS9");
        noteList.add("D09");
        noteList.add("DS9");
        noteList.add("E09");
        noteList.add("F09");
        noteList.add("FS9");
        noteList.add("G09");
        noteList.add("GS9");
        noteList.add("A09");
        noteList.add("AS9");
        noteList.add("B09");
    }
    //初始化note频率范围list库
    static{
        noteLibRangeList.add(new NoteFrequencyRange(127.14f,134.7f,"C03"));
        noteLibRangeList.add(new NoteFrequencyRange(134.7f,142.71f,"CS3"));
        noteLibRangeList.add(new NoteFrequencyRange(142.71f,151.195f,"D03"));
        noteLibRangeList.add(new NoteFrequencyRange(151.195f,160.185f,"DS3"));
        noteLibRangeList.add(new NoteFrequencyRange(160.185f,169.71f,"E03"));
        noteLibRangeList.add(new NoteFrequencyRange(169.71f,179.805f,"F03"));
        noteLibRangeList.add(new NoteFrequencyRange(179.805f,190.5f,"FS3"));
        noteLibRangeList.add(new NoteFrequencyRange(190.5f,201.825f,"G03"));
        noteLibRangeList.add(new NoteFrequencyRange(201.825f,213.825f,"GS3"));
        noteLibRangeList.add(new NoteFrequencyRange(213.825f,226.54f,"A03"));
        noteLibRangeList.add(new NoteFrequencyRange(226.54f,240.01f,"AS3"));
        noteLibRangeList.add(new NoteFrequencyRange(240.01f,254.285f,"B03"));
        noteLibRangeList.add(new NoteFrequencyRange(254.285f,269.405f,"C04"));
        noteLibRangeList.add(new NoteFrequencyRange(269.405f,285.42f,"CS4"));
        noteLibRangeList.add(new NoteFrequencyRange(285.42f,302.395f,"D04"));
        noteLibRangeList.add(new NoteFrequencyRange(302.395f,320.38f,"DS4"));
        noteLibRangeList.add(new NoteFrequencyRange(320.38f,339.43f,"E04"));
        noteLibRangeList.add(new NoteFrequencyRange(339.43f,359.61f,"F04"));
        noteLibRangeList.add(new NoteFrequencyRange(359.61f,380.995f,"FS4"));
        noteLibRangeList.add(new NoteFrequencyRange(380.995f,403.65f,"G04"));
        noteLibRangeList.add(new NoteFrequencyRange(403.65f,427.65f,"GS4"));
        noteLibRangeList.add(new NoteFrequencyRange(427.65f,453.08f,"A04"));
        noteLibRangeList.add(new NoteFrequencyRange(453.08f,480.02f,"AS4"));
        noteLibRangeList.add(new NoteFrequencyRange(480.02f,508.565f,"B04"));
        noteLibRangeList.add(new NoteFrequencyRange(508.565f,538.81f,"C05"));
        noteLibRangeList.add(new NoteFrequencyRange(538.81f,570.85f,"CS5"));
        noteLibRangeList.add(new NoteFrequencyRange(570.85f,604.79f,"D05"));
        noteLibRangeList.add(new NoteFrequencyRange(604.79f,640.755f,"DS5"));
        noteLibRangeList.add(new NoteFrequencyRange(640.755f,678.86f,"E05"));
        noteLibRangeList.add(new NoteFrequencyRange(678.86f,719.225f,"F05"));
        noteLibRangeList.add(new NoteFrequencyRange(719.225f,761.99f,"FS5"));
        noteLibRangeList.add(new NoteFrequencyRange(761.99f,807.3f,"G05"));
        noteLibRangeList.add(new NoteFrequencyRange(807.3f,855.305f,"GS5"));
        noteLibRangeList.add(new NoteFrequencyRange(855.305f,906.165f,"A05"));
        noteLibRangeList.add(new NoteFrequencyRange(906.165f,960.05f,"AS5"));
        noteLibRangeList.add(new NoteFrequencyRange(960.05f,1017.135f,"B05"));
        noteLibRangeList.add(new NoteFrequencyRange(1017.135f,1077.6f,"C06"));
        noteLibRangeList.add(new NoteFrequencyRange(1077.6f,1141.7f,"CS6"));
        noteLibRangeList.add(new NoteFrequencyRange(1141.7f,1209.6f,"D06"));
        noteLibRangeList.add(new NoteFrequencyRange(1209.6f,1281.5f,"DS6"));
        noteLibRangeList.add(new NoteFrequencyRange(1281.5f,1357.7f,"E06"));
        noteLibRangeList.add(new NoteFrequencyRange(1357.7f,1438.45f,"F06"));
        noteLibRangeList.add(new NoteFrequencyRange(1438.45f,1524f,"FS6"));
        noteLibRangeList.add(new NoteFrequencyRange(1524f,1614.6f,"G06"));
        noteLibRangeList.add(new NoteFrequencyRange(1614.6f,1710.6f,"GS6"));
        noteLibRangeList.add(new NoteFrequencyRange(1710.6f,1812.35f,"A06"));
        noteLibRangeList.add(new NoteFrequencyRange(1812.35f,1920.1f,"AS6"));
        noteLibRangeList.add(new NoteFrequencyRange(1920.1f,2034.25f,"B06"));
        noteLibRangeList.add(new NoteFrequencyRange(15.852f,16.838f,"C00"));
        noteLibRangeList.add(new NoteFrequencyRange(16.838f,17.839f,"CS0"));
        noteLibRangeList.add(new NoteFrequencyRange(17.839f,18.8995f,"D00"));
        noteLibRangeList.add(new NoteFrequencyRange(18.8995f,20.0235f,"DS0"));
        noteLibRangeList.add(new NoteFrequencyRange(20.0235f,21.2145f,"E00"));
        noteLibRangeList.add(new NoteFrequencyRange(21.2145f,22.476f,"F00"));
        noteLibRangeList.add(new NoteFrequencyRange(22.476f,23.8125f,"FS0"));
        noteLibRangeList.add(new NoteFrequencyRange(23.8125f,25.2285f,"G00"));
        noteLibRangeList.add(new NoteFrequencyRange(25.2285f,26.7285f,"GS0"));
        noteLibRangeList.add(new NoteFrequencyRange(26.7285f,28.3175f,"A00"));
        noteLibRangeList.add(new NoteFrequencyRange(28.3175f,30.0015f,"AS0"));
        noteLibRangeList.add(new NoteFrequencyRange(30.0015f,31.7855f,"B00"));
        noteLibRangeList.add(new NoteFrequencyRange(31.7855f,33.6755f,"C01"));
        noteLibRangeList.add(new NoteFrequencyRange(33.6755f,35.678f,"CS1"));
        noteLibRangeList.add(new NoteFrequencyRange(35.678f,37.7995f,"D01"));
        noteLibRangeList.add(new NoteFrequencyRange(37.7995f,40.047f,"DS1"));
        noteLibRangeList.add(new NoteFrequencyRange(40.047f,42.4285f,"E01"));
        noteLibRangeList.add(new NoteFrequencyRange(42.4285f,44.9515f,"F01"));
        noteLibRangeList.add(new NoteFrequencyRange(44.9515f,47.624f,"FS1"));
        noteLibRangeList.add(new NoteFrequencyRange(47.624f,50.456f,"G01"));
        noteLibRangeList.add(new NoteFrequencyRange(50.456f,53.4565f,"GS1"));
        noteLibRangeList.add(new NoteFrequencyRange(53.4565f,56.635f,"A01"));
        noteLibRangeList.add(new NoteFrequencyRange(56.635f,60.0025f,"AS1"));
        noteLibRangeList.add(new NoteFrequencyRange(60.0025f,63.5705f,"B01"));
        noteLibRangeList.add(new NoteFrequencyRange(63.5705f,67.351f,"C02"));
        noteLibRangeList.add(new NoteFrequencyRange(67.351f,71.356f,"CS2"));
        noteLibRangeList.add(new NoteFrequencyRange(71.356f,75.599f,"D02"));
        noteLibRangeList.add(new NoteFrequencyRange(75.599f,80.0945f,"DS2"));
        noteLibRangeList.add(new NoteFrequencyRange(80.0945f,84.857f,"E02"));
        noteLibRangeList.add(new NoteFrequencyRange(84.857f,89.903f,"F02"));
        noteLibRangeList.add(new NoteFrequencyRange(89.903f,95.249f,"FS2"));
        noteLibRangeList.add(new NoteFrequencyRange(95.249f,100.9145f,"G02"));
        noteLibRangeList.add(new NoteFrequencyRange(100.9145f,106.915f,"GS2"));
        noteLibRangeList.add(new NoteFrequencyRange(106.915f,113.27f,"A02"));
        noteLibRangeList.add(new NoteFrequencyRange(113.27f,120.005f,"AS2"));
        noteLibRangeList.add(new NoteFrequencyRange(120.005f,127.14f,"B02"));
        noteLibRangeList.add(new NoteFrequencyRange(2034.25f,2155.25f,"C07"));
        noteLibRangeList.add(new NoteFrequencyRange(2155.25f,2283.4f,"CS7"));
        noteLibRangeList.add(new NoteFrequencyRange(2283.4f,2419.15f,"D07"));
        noteLibRangeList.add(new NoteFrequencyRange(2419.15f,2563f,"DS7"));
        noteLibRangeList.add(new NoteFrequencyRange(2563f,2715.4f,"E07"));
        noteLibRangeList.add(new NoteFrequencyRange(2715.4f,2876.9f,"F07"));
        noteLibRangeList.add(new NoteFrequencyRange(2876.9f,3048f,"FS7"));
        noteLibRangeList.add(new NoteFrequencyRange(3048f,3229.2f,"G07"));
        noteLibRangeList.add(new NoteFrequencyRange(3229.2f,3421.2f,"GS7"));
        noteLibRangeList.add(new NoteFrequencyRange(3421.2f,3624.65f,"A07"));
        noteLibRangeList.add(new NoteFrequencyRange(3624.65f,3840.2f,"AS7"));
        noteLibRangeList.add(new NoteFrequencyRange(3840.2f,4068.55f,"B07"));
        noteLibRangeList.add(new NoteFrequencyRange(4068.55f,4310.45f,"C08"));
        noteLibRangeList.add(new NoteFrequencyRange(4310.45f,4566.75f,"CS8"));
        noteLibRangeList.add(new NoteFrequencyRange(4566.75f,4838.3f,"D08"));
        noteLibRangeList.add(new NoteFrequencyRange(4838.3f,5126f,"DS8"));
        noteLibRangeList.add(new NoteFrequencyRange(5126f,5430.85f,"E08"));
        noteLibRangeList.add(new NoteFrequencyRange(5430.85f,5753.8f,"F08"));
        noteLibRangeList.add(new NoteFrequencyRange(5753.8f,6095.9f,"FS8"));
        noteLibRangeList.add(new NoteFrequencyRange(6095.9f,6458.4f,"G08"));
        noteLibRangeList.add(new NoteFrequencyRange(6458.4f,6842.45f,"GS8"));
        noteLibRangeList.add(new NoteFrequencyRange(6842.45f,7249.3f,"A08"));
        noteLibRangeList.add(new NoteFrequencyRange(7249.3f,7680.35f,"AS8"));
        noteLibRangeList.add(new NoteFrequencyRange(7680.35f,8137.05f,"B08"));
        noteLibRangeList.add(new NoteFrequencyRange(8137.05f,8620.9f,"C09"));
        noteLibRangeList.add(new NoteFrequencyRange(8620.9f,9133.55f,"CS9"));
        noteLibRangeList.add(new NoteFrequencyRange(9133.55f,9676.7f,"D09"));
        noteLibRangeList.add(new NoteFrequencyRange(9676.7f,10252.05f,"DS9"));
        noteLibRangeList.add(new NoteFrequencyRange(10252.05f,10861.5f,"E09"));
        noteLibRangeList.add(new NoteFrequencyRange(10861.5f,11507.5f,"F09"));
        noteLibRangeList.add(new NoteFrequencyRange(11507.5f,12192f,"FS9"));
        noteLibRangeList.add(new NoteFrequencyRange(12192f,12917f,"G09"));
        noteLibRangeList.add(new NoteFrequencyRange(12917f,13685f,"GS9"));
        noteLibRangeList.add(new NoteFrequencyRange(13685f,14498.5f,"A09"));
        noteLibRangeList.add(new NoteFrequencyRange(14498.5f,15360.5f,"AS9"));
        noteLibRangeList.add(new NoteFrequencyRange(15360.5f,16704f,"B09"));
    }
    //初始化note与频率的对应关系map
    static{
        noteFrequencyMap.put("C00",16.352f);
        noteFrequencyMap.put("CS0",17.324f);
        noteFrequencyMap.put("D00",18.354f);
        noteFrequencyMap.put("DS0",19.445f);
        noteFrequencyMap.put("E00",20.602f);
        noteFrequencyMap.put("F00",21.827f);
        noteFrequencyMap.put("FS0",23.125f);
        noteFrequencyMap.put("G00",24.5f);
        noteFrequencyMap.put("GS0",25.957f);
        noteFrequencyMap.put("A00",27.5f);
        noteFrequencyMap.put("AS0",29.135f);
        noteFrequencyMap.put("B00",30.868f);
        noteFrequencyMap.put("C01",32.703f);
        noteFrequencyMap.put("CS1",34.648f);
        noteFrequencyMap.put("D01",36.708f);
        noteFrequencyMap.put("DS1",38.891f);
        noteFrequencyMap.put("E01",41.203f);
        noteFrequencyMap.put("F01",43.654f);
        noteFrequencyMap.put("FS1",46.249f);
        noteFrequencyMap.put("G01",48.999f);
        noteFrequencyMap.put("GS1",51.913f);
        noteFrequencyMap.put("A01",55f);
        noteFrequencyMap.put("AS1",58.27f);
        noteFrequencyMap.put("B01",61.735f);
        noteFrequencyMap.put("C02",65.406f);
        noteFrequencyMap.put("CS2",69.296f);
        noteFrequencyMap.put("D02",73.416f);
        noteFrequencyMap.put("DS2",77.782f);
        noteFrequencyMap.put("E02",82.407f);
        noteFrequencyMap.put("F02",87.307f);
        noteFrequencyMap.put("FS2",92.499f);
        noteFrequencyMap.put("G02",97.999f);
        noteFrequencyMap.put("GS2",103.83f);
        noteFrequencyMap.put("A02",110f);
        noteFrequencyMap.put("AS2",116.54f);
        noteFrequencyMap.put("B02",123.47f);
        noteFrequencyMap.put("C03",130.81f);
        noteFrequencyMap.put("CS3",138.59f);
        noteFrequencyMap.put("D03",146.83f);
        noteFrequencyMap.put("DS3",155.56f);
        noteFrequencyMap.put("E03",164.81f);
        noteFrequencyMap.put("F03",174.61f);
        noteFrequencyMap.put("FS3",185f);
        noteFrequencyMap.put("G03",196f);
        noteFrequencyMap.put("GS3",207.65f);
        noteFrequencyMap.put("A03",220f);
        noteFrequencyMap.put("AS3",233.08f);
        noteFrequencyMap.put("B03",246.94f);
        noteFrequencyMap.put("C04",261.63f);
        noteFrequencyMap.put("CS4",277.18f);
        noteFrequencyMap.put("D04",293.66f);
        noteFrequencyMap.put("DS4",311.13f);
        noteFrequencyMap.put("E04",329.63f);
        noteFrequencyMap.put("F04",349.23f);
        noteFrequencyMap.put("FS4",369.99f);
        noteFrequencyMap.put("G04",392f);
        noteFrequencyMap.put("GS4",415.3f);
        noteFrequencyMap.put("A04",440f);
        noteFrequencyMap.put("AS4",466.16f);
        noteFrequencyMap.put("B04",493.88f);
        noteFrequencyMap.put("C05",523.25f);
        noteFrequencyMap.put("CS5",554.37f);
        noteFrequencyMap.put("D05",587.33f);
        noteFrequencyMap.put("DS5",622.25f);
        noteFrequencyMap.put("E05",659.26f);
        noteFrequencyMap.put("F05",698.46f);
        noteFrequencyMap.put("FS5",739.99f);
        noteFrequencyMap.put("G05",783.99f);
        noteFrequencyMap.put("GS5",830.61f);
        noteFrequencyMap.put("A05",880f);
        noteFrequencyMap.put("AS5",932.33f);
        noteFrequencyMap.put("B05",987.77f);
        noteFrequencyMap.put("C06",1046.5f);
        noteFrequencyMap.put("CS6",1108.7f);
        noteFrequencyMap.put("D06",1174.7f);
        noteFrequencyMap.put("DS6",1244.5f);
        noteFrequencyMap.put("E06",1318.5f);
        noteFrequencyMap.put("F06",1396.9f);
        noteFrequencyMap.put("FS6",1480f);
        noteFrequencyMap.put("G06",1568f);
        noteFrequencyMap.put("GS6",1661.2f);
        noteFrequencyMap.put("A06",1760f);
        noteFrequencyMap.put("AS6",1864.7f);
        noteFrequencyMap.put("B06",1975.5f);
        noteFrequencyMap.put("C07",2093f);
        noteFrequencyMap.put("CS7",2217.5f);
        noteFrequencyMap.put("D07",2349.3f);
        noteFrequencyMap.put("DS7",2489f);
        noteFrequencyMap.put("E07",2637f);
        noteFrequencyMap.put("F07",2793.8f);
        noteFrequencyMap.put("FS7",2960f);
        noteFrequencyMap.put("G07",3136f);
        noteFrequencyMap.put("GS7",3322.4f);
        noteFrequencyMap.put("A07",3520f);
        noteFrequencyMap.put("AS7",3729.3f);
        noteFrequencyMap.put("B07",3951.1f);
        noteFrequencyMap.put("C08",4186f);
        noteFrequencyMap.put("CS8",4434.9f);
        noteFrequencyMap.put("D08",4698.6f);
        noteFrequencyMap.put("DS8",4978f);
        noteFrequencyMap.put("E08",5274f);
        noteFrequencyMap.put("F08",5587.7f);
        noteFrequencyMap.put("FS8",5919.9f);
        noteFrequencyMap.put("G08",6271.9f);
        noteFrequencyMap.put("GS8",6644.9f);
        noteFrequencyMap.put("A08",7040f);
        noteFrequencyMap.put("AS8",7458.6f);
        noteFrequencyMap.put("B08",7902.1f);
        noteFrequencyMap.put("C09",8372f);
        noteFrequencyMap.put("CS9",8869.8f);
        noteFrequencyMap.put("D09",9397.3f);
        noteFrequencyMap.put("DS9",9956.1f);
        noteFrequencyMap.put("E09",10548f);
        noteFrequencyMap.put("F09",11175f);
        noteFrequencyMap.put("FS9",11840f);
        noteFrequencyMap.put("G09",12544f);
        noteFrequencyMap.put("GS9",13290f);
        noteFrequencyMap.put("A09",14080f);
        noteFrequencyMap.put("AS9",14917f);
        noteFrequencyMap.put("B09",15804f);
    }
    //查找note
    public static String getNoteByFrequency(float frequency){
        String res = "";
        for(NoteFrequencyRange note: noteLibRangeList)
            if(note.isFrequencyMatch(frequency))
                res = note.noteName;
        return res;
    }
}
